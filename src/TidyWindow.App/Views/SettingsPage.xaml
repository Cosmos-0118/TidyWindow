<Page x:Class="TidyWindow.App.Views.SettingsPage"
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
          xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
          mc:Ignorable="d"
          Background="Transparent"
          Title="Settings">
        <Page.Resources>
                <Style x:Key="SettingsToggleSwitchStyle"
                           TargetType="ToggleButton">
                        <Setter Property="Width"
                                        Value="52"/>
                        <Setter Property="Height"
                                        Value="28"/>
                        <Setter Property="Background"
                                        Value="#1F2937"/>
                        <Setter Property="BorderBrush"
                                        Value="#1F2937"/>
                        <Setter Property="BorderThickness"
                                        Value="0"/>
                        <Setter Property="Cursor"
                                        Value="Hand"/>
                        <Setter Property="Focusable"
                                        Value="False"/>
                        <Setter Property="Template">
                                <Setter.Value>
                                        <ControlTemplate TargetType="ToggleButton">
                                                <Grid>
                                                        <Border x:Name="Track"
                                                                        Background="{TemplateBinding Background}"
                                                                        BorderBrush="#334155"
                                                                        BorderThickness="1"
                                                                        CornerRadius="14"/>
                                                        <Ellipse x:Name="Thumb"
                                                                         Width="22"
                                                                         Height="22"
                                                                         Fill="#F8FAFC"
                                                                         Margin="4,3,26,3"/>
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                        <Trigger Property="IsChecked"
                                                                         Value="True">
                                                                <Setter TargetName="Track"
                                                                                Property="Background"
                                                                                Value="#7C3AED"/>
                                                                <Setter TargetName="Track"
                                                                                Property="BorderBrush"
                                                                                Value="#7C3AED"/>
                                                                <Setter TargetName="Thumb"
                                                                                Property="Margin"
                                                                                Value="26,3,4,3"/>
                                                        </Trigger>
                                                        <Trigger Property="IsEnabled"
                                                                         Value="False">
                                                                <Setter TargetName="Track"
                                                                                Property="Background"
                                                                                Value="#1F2937"/>
                                                                <Setter TargetName="Track"
                                                                                Property="BorderBrush"
                                                                                Value="#1F2937"/>
                                                                <Setter TargetName="Thumb"
                                                                                Property="Fill"
                                                                                Value="#475569"/>
                                                        </Trigger>
                                                        <Trigger Property="IsMouseOver"
                                                                         Value="True">
                                                                <Setter TargetName="Track"
                                                                                Property="BorderBrush"
                                                                                Value="#7C3AED"/>
                                                        </Trigger>
                                                </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                </Setter.Value>
                        </Setter>
                </Style>

                <Style x:Key="SettingsSectionHeaderTextStyle"
                           TargetType="TextBlock">
                        <Setter Property="Foreground"
                                        Value="#F8FAFC"/>
                        <Setter Property="FontSize"
                                        Value="18"/>
                        <Setter Property="FontWeight"
                                        Value="SemiBold"/>
                </Style>

                <Style x:Key="SettingsSectionSubtitleTextStyle"
                           TargetType="TextBlock">
                        <Setter Property="Foreground"
                                        Value="#94A3B8"/>
                        <Setter Property="FontSize"
                                        Value="12"/>
                        <Setter Property="TextWrapping"
                                        Value="Wrap"/>
                </Style>
        </Page.Resources>

        <ScrollViewer Margin="32"
                                  VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled"
                                  CanContentScroll="False">
                <StackPanel>
                        <TextBlock Text="Settings"
                                           FontSize="30"
                                           FontWeight="Bold"
                                           Foreground="#F9FAFB"/>
                        <TextBlock Text="Tune how TidyWindow runs on your machine."
                                           FontSize="14"
                                           Margin="0,6,0,24"
                                           Foreground="#94A3B8"/>

                        <StackPanel>
                                <Border Background="#0B1120"
                                                Padding="24"
                                                CornerRadius="16"
                                                BorderBrush="#1D2A44"
                                                BorderThickness="1"
                                                Margin="0,0,0,16">
                                        <StackPanel>
                                                <TextBlock Text="Telemetry sharing"
                                                                   Style="{StaticResource SettingsSectionHeaderTextStyle}"/>
                                                <TextBlock Text="Opt in to share anonymized diagnostics so PulseGuard can spot regressions early."
                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                   Margin="0,6,0,20"/>
                                                <CheckBox Content="Enable telemetry"
                                                                  IsChecked="{Binding TelemetryEnabled, Mode=TwoWay}"
                                                                  FontSize="14"
                                                                  Foreground="#E2E8F0"
                                                                  Margin="0,0,0,4"/>
                                                <TextBlock Text="Telemetry never includes personal files or command input; it only tracks script health."
                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"/>
                                        </StackPanel>
                                </Border>

                                <Border Background="#0B1120"
                                                Padding="24"
                                                CornerRadius="16"
                                                BorderBrush="#1D2A44"
                                                BorderThickness="1"
                                                Margin="0,0,0,16">
                                        <StackPanel>
                                                <TextBlock Text="Session &amp; elevation"
                                                                   Style="{StaticResource SettingsSectionHeaderTextStyle}"/>
                                                <TextBlock Text="Maintenance scripts swap services, installers, and registry state. Staying elevated by default keeps those flows seamless."
                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                   Margin="0,6,0,0"/>
                                                <Border Margin="0,20,0,0"
                                                                Padding="16"
                                                                CornerRadius="12">
                                                        <Border.Style>
                                                                <Style TargetType="Border">
                                                                        <Setter Property="Background"
                                                                                        Value="#0F172A"/>
                                                                        <Setter Property="BorderBrush"
                                                                                        Value="#1D2A44"/>
                                                                        <Setter Property="BorderThickness"
                                                                                        Value="1"/>
                                                                        <Style.Triggers>
                                                                                <DataTrigger Binding="{Binding IsRunningElevated}"
                                                                                                         Value="True">
                                                                                        <Setter Property="Background"
                                                                                                        Value="#1E3A8A"/>
                                                                                        <Setter Property="BorderBrush"
                                                                                                        Value="#3B82F6"/>
                                                                                </DataTrigger>
                                                                        </Style.Triggers>
                                                                </Style>
                                                        </Border.Style>
                                                        <StackPanel>
                                                                <TextBlock Text="{Binding CurrentPrivilegeDisplay}"
                                                                                   FontSize="16"
                                                                                   FontWeight="SemiBold"
                                                                                   Foreground="#F8FAFC"/>
                                                                <TextBlock Text="{Binding CurrentPrivilegeAdvice}"
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,8,0,0"/>
                                                                <TextBlock Text="If you relaunch in user mode, package installs and service repairs will pause until elevation is restored."
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,6,0,0"/>
                                                        </StackPanel>
                                                </Border>
                                        </StackPanel>
                                </Border>

                                <Border Background="#0B1120"
                                                Padding="24"
                                                CornerRadius="16"
                                                BorderBrush="#1D2A44"
                                                BorderThickness="1"
                                                Margin="0,0,0,16">
                                        <StackPanel>
                                                <TextBlock Text="Background presence"
                                                                   Style="{StaticResource SettingsSectionHeaderTextStyle}"/>
                                                <TextBlock Text="Keep TidyWindow available from the system tray so queued automation can continue quietly."
                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                   Margin="0,6,0,0"/>

                                                <Grid Margin="0,20,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel>
                                                                <TextBlock Text="Run in background"
                                                                                   Foreground="#E2E8F0"
                                                                                   FontSize="14"
                                                                                   FontWeight="SemiBold"/>
                                                                <TextBlock Text="Minimize to the tray instead of closing the process."
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,4,0,0"/>
                                                        </StackPanel>
                                                        <ToggleButton Grid.Column="1"
                                                                                  Style="{StaticResource SettingsToggleSwitchStyle}"
                                                                                  IsChecked="{Binding RunInBackground, Mode=TwoWay}"/>
                                                </Grid>
                                        </StackPanel>
                                </Border>

                                <Border Background="#0B1120"
                                                Padding="24"
                                                CornerRadius="16"
                                                BorderBrush="#1D2A44"
                                                BorderThickness="1">
                                        <StackPanel>
                                                <TextBlock Text="PulseGuard watchdog"
                                                                   Style="{StaticResource SettingsSectionHeaderTextStyle}"/>
                                                <TextBlock Text="PulseGuard keeps a pulse on automation logs, highlighting success digests and urgent issues without spamming your desktop."
                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                   Margin="0,6,0,0"/>

                                                <Grid Margin="0,20,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel>
                                                                <TextBlock Text="Enable PulseGuard"
                                                                                   Foreground="#E2E8F0"
                                                                                   FontSize="14"
                                                                                   FontWeight="SemiBold"/>
                                                                <TextBlock Text="Turn on the watchdog so it can classify automation events."
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,4,0,0"/>
                                                        </StackPanel>
                                                        <ToggleButton Grid.Column="1"
                                                                                  Style="{StaticResource SettingsToggleSwitchStyle}"
                                                                                  IsChecked="{Binding PulseGuardEnabled, Mode=TwoWay}"/>
                                                </Grid>

                                                <Grid Margin="0,16,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel>
                                                                <TextBlock Text="Surface system notifications"
                                                                                   Foreground="#E2E8F0"
                                                                                   FontSize="14"
                                                                                   FontWeight="SemiBold"/>
                                                                <TextBlock Text="Allow PulseGuard to raise Windows toasts when you're away from the app."
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,4,0,0"/>
                                                        </StackPanel>
                                                        <ToggleButton Grid.Column="1"
                                                                                  Style="{StaticResource SettingsToggleSwitchStyle}"
                                                                                  IsChecked="{Binding NotificationsEnabled, Mode=TwoWay}"
                                                                                  IsEnabled="{Binding PulseGuardEnabled}"/>
                                                </Grid>

                                                <Grid Margin="0,16,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel>
                                                                <TextBlock Text="Only notify when I'm away"
                                                                                   Foreground="#E2E8F0"
                                                                                   FontSize="14"
                                                                                   FontWeight="SemiBold"/>
                                                                <TextBlock Text="Mute toast notifications while the window stays in focus."
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,4,0,0"/>
                                                        </StackPanel>
                                                        <ToggleButton Grid.Column="1"
                                                                                  Style="{StaticResource SettingsToggleSwitchStyle}"
                                                                                  IsChecked="{Binding NotifyOnlyWhenInactive, Mode=TwoWay}"
                                                                                  IsEnabled="{Binding NotificationsEnabled}"/>
                                                </Grid>

                                                <Grid Margin="0,16,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel>
                                                                <TextBlock Text="Show completion digests"
                                                                                   Foreground="#E2E8F0"
                                                                                   FontSize="14"
                                                                                   FontWeight="SemiBold"/>
                                                                <TextBlock Text="Get a wrap-up when long-running scripts succeed."
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,4,0,0"/>
                                                        </StackPanel>
                                                        <ToggleButton Grid.Column="1"
                                                                                  Style="{StaticResource SettingsToggleSwitchStyle}"
                                                                                  IsChecked="{Binding PulseGuardShowSuccessSummaries, Mode=TwoWay}"
                                                                                  IsEnabled="{Binding CanAdjustPulseGuardNotifications}"/>
                                                </Grid>

                                                <Grid Margin="0,16,0,0">
                                                        <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <StackPanel>
                                                                <TextBlock Text="Show action-required alerts"
                                                                                   Foreground="#E2E8F0"
                                                                                   FontSize="14"
                                                                                   FontWeight="SemiBold"/>
                                                                <TextBlock Text="Keep blockers like legacy PowerShell or pending restarts front and center."
                                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                                   Margin="0,4,0,0"/>
                                                        </StackPanel>
                                                        <ToggleButton Grid.Column="1"
                                                                                  Style="{StaticResource SettingsToggleSwitchStyle}"
                                                                                  IsChecked="{Binding PulseGuardShowActionAlerts, Mode=TwoWay}"
                                                                                  IsEnabled="{Binding CanAdjustPulseGuardNotifications}"/>
                                                </Grid>

                                                <TextBlock Text="Every PulseGuard toast includes a &quot;View log&quot; action, so you can jump straight to the evidence."
                                                                   Style="{StaticResource SettingsSectionSubtitleTextStyle}"
                                                                   Margin="0,20,0,0"/>
                                        </StackPanel>
                                </Border>
                        </StackPanel>
                </StackPanel>
        </ScrollViewer>
</Page>
